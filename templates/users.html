<!DOCTYPE html>
<html>
<head>
    <title>Пользователи</title>
</head>
<body>
<h2>Пользователи</h2>

<table border="1" cellpadding="5">
<tr>
    <th>Chat ID</th>
    <th>Access Token</th>
    <th>Refresh Token</th>
    <th>Следующий refresh</th>
    <th>Статус</th>
    <th>Действия</th>
</tr>
{% for user in users %}
<tr>
    <td>{{ user.chat_id }}</td>
    <td>{{ user.access_token }}</td>
    <td>{{ user.refresh_token }}</td>
    <td>{{ user.next_refresh }}</td>
    <td>{{ "приостановлен" if user.suspended else "активен" }}</td>
    <td>
        <form method="post" action="/users/pause" style="display:inline">
            <input type="hidden" name="chat_id" value="{{ user.chat_id }}">
            <button type="submit">{{ "Восстановить" if user.suspended else "Приостановить" }}</button>
        </form>
        <form method="post" action="/users/refresh" style="display:inline">
            <input type="hidden" name="chat_id" value="{{ user.chat_id }}">
            <button type="submit">Обновить токены</button>
        </form>
        <form method="post" action="/users/warmup" style="display:inline">
            <input type="hidden" name="chat_id" value="{{ user.chat_id }}">
            <button type="submit">Прогрев</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>

<div>
{% if page > 0 %}
    <a href="/users?page={{ page-1 }}">⬅️ Назад</a>
{% endif %}
{% if page+1 < total_pages %}
    <a href="/users?page={{ page+1 }}">➡️ Вперёд</a>
{% endif %}
</div>
</body>
</html>
